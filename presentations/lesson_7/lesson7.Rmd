---
title: "Lesson 7: Further Topics"
author: "Ashir Borah and Natalie Elphick"
date: "November 1st, 2024"
knit: (function(input, ...) {
    rmarkdown::render(
      input,
      output_dir = "../../docs/presentations"
    )
  })
output:
  revealjs::revealjs_presentation:
    theme: simple
    css: ../style.css
---

```{r setup, include=FALSE}
library(tidyverse)
library(gapminder)
knitr::opts_chunk$set(echo = TRUE,
                      message = FALSE,
                      warning = FALSE,
                      comment = "")

```

## 

<center>Press the "?" key for tips on navigating these slides</center>

# Overview

-   R Markdown 
-   Iteration 
-   Coding Best Practices
-   How to Find Bioinformatics R Packages

# R Markdown

## R Markdown


-   A file format combining `R` code with [Markdown](https://www.markdownguide.org/basic-syntax/) for text formatting.
-   Designed for creating reproducible research reports in various formats (HTML, PDF, Word).
-   For more info check out this free book : [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/how-to-read-this-book.html) 


## R Markdown Advanced Usage

-   **Presentations:** Creating slides (like these) with [revealjs](https://github.com/rstudio/revealjs).
-   **Publications:** Authoring online books that combine narrative, code, and output with [bookdown](https://bookdown.org/).
-   **Interactive Documents:** Developing interactive tutorials or dashboards with [learnR](https://rstudio.github.io/learnr/) and other embedded applications.




# Iteration

## For loop 

When you want to do some operation repeatedly 

```{r, eval = FALSE}
for (element in my_vector) {
  ** DO STUFF WITH element**
}
```

## For loop example

```{r forloop_1}
country_data <- gapminder %>% filter(country == "United States")

# Simple for loop to print life expectancy for each year
for (i in 1:nrow(country_data)) {
  
  year <- country_data$year[i]
  
  life_exp <- country_data$lifeExp[i]
  
  print(paste("Year:", year, "- Life Expectancy:", life_exp))
}
```



## While loop

Rarely used in analysis, but good to be aware of

```{r, eval = FALSE}
while (condition) {
  # Body
  
  # The condition should be set to FALSE at some point
  # or this will never end
}
```

## If (conditional) statement 

Do *some stuff* only **if** a given condition holds

```{r, eval = FALSE}
if (logical_statement) {
  **DO SOMETHING**
}
```

Often useful inside of loops

## If / else

```{r, eval = FALSE}
if (logical_statement) {
  **DO SOMETHING**
} else {
  **OTHER STUFF**
}
```


## If example

Count the number of even numbers in a vector

```{r ifelse_2, exercise = TRUE}
x <- c(2,5,3,9,8,11,6)
count <- 0
for (val in x) {
  if (val %% 2 == 0) {
    count = count+1
  }
}
print(count)
```


# Coding Best Practices

## Use Git

-   Git is a tool used for version control
-   Version control
    -   Practice of controlling, organizing, and tracking different versions in history of computer files
-   Git repositories (folders) are stored remotely on [GitHub](https://docs.github.com/en/get-started/start-your-journey/about-github-and-git)
-   Git allows you to create snapshots of your code, taking the stress out of tracking changes

## Use Templates

-   Creating and updating .R and .Rmd templates will save you time and make documentation easier
-   [Example .R template](https://www.dropbox.com/scl/fi/bsg9yf2o69hvf21kgjriq/Rscript_template.R?rlkey=dfedltx13fee8v9vp8n6v92j8&dl=1)
-   [Example .Rmd template](https://www.dropbox.com/scl/fi/5lqwu8866fe3ayz40pvcr/RMD_template.Rmd?rlkey=jo7n348waj6kpzfv0p8up6yfr&dl=1)

## Maintain a Consistent Style

-   Highly recommend the [tidyverse style guide](https://style.tidyverse.org/)
-   Style guides are a way to maintain consistent readability 
-   The trade-off is adhering to rules that are opinionated and sometimes arbitrary
-   The package [styler](https://github.com/r-lib/styler) can automatically style your code files

## Avoid Writing Large Code Files

-   Keep code files **under 1000 lines** to ensure maintainability and readability
-   Large files are harder to debug, review, and understand
-   Not writing enough functions is a common cause of overly large files
-   Example Strategy:   

Split a long analysis script into separate, logically divided files (e.g., `data_preprocessing.R`, `model_training.R`, `visualization.R`).

# How to Find Bioinformatics R Packages


## Key Questions

-   <u>Is there a benchmarking paper?</u>
-   What assay was the package designed for?
-   Is it well documented?
-   When was the last release?
-   Is it maintained (frequent updates)?
-   Does it work on all operating systems?
-   Are other people using it?
-   Do they respond to github issues?

## BioConductor and CRAN

-   Both of these have requirements for packages they host (eg. for BioConductor they have to run on all major operating systems)

-   Prefer BioConductor and CRAN packages over ones only hosted on GitHub

## BioConductor

-   Click [here](https://www.bioconductor.org/packages/release/BiocViews.html#___Sequencing) to go to BioC views
-   Pick the Assay you want to analyse
-   Pick the type of analysis you want to do
-   Find a package that does it
-   Find the vignette in on the package page to learn the basics

## Documentation

-   Well-documented packages have detailed manuals, examples, and vignettes
-   Use `browseVignettes("packageName")` in R to find vignettes that provide step-by-step usage
-   Ensure the package has comprehensive help files using ?functionName or help(package = "packageName")

## Getting help
-   Read the documentation to see how the authors want you to reach out about issues or bugs
-   In many cases they want you to post a GitHub issue:
    -   [Example issue in ggplot2](https://github.com/tidyverse/ggplot2/issues/6128)
-   Be courteous, many packages are maintained by a single individual on top of their regular job

<br></br>

Sometimes a package is no longer maintained by anyone and you cannot get a response for your issue. Find another package if you can.

# Additional Resources

## R

-   [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/how-to-read-this-book.html) : Excellent R markdown reference

-   [R for Data Science](https://r4ds.hadley.nz/)

-   [ggplot2: elegant graphics for data analysis](https://ggplot2-book.org/)

-   [Advanced R](https://adv-r.hadley.nz/)

## Statistics

-   [Data Analysis in R](https://bookdown.org/steve_midway/DAR) : This book has more statistics details than *R for Data Science*
-   [Generalized Linear Models](https://bookdown.org/steve_midway/DAR/glms-generalized-linear-models.html)\
-   [Random Effects](https://bookdown.org/steve_midway/DAR/random-effects.html)

## RNA-seq Analysis

-   [Brief guide to RNA sequencing analysis for nonexperts in bioinformatics](https://doi.org/10.1016/j.mocell.2024.100060) : A comprehensive paper for those new to RNA-seq
-   [RNA-seq Expression Units](https://luisvalesilva.com/datasimple/rna-seq_units.html) : Blog post on understanding common units


## Dimensional Reduction

-   [Tutorial on PCA](https://uw.pressbooks.pub/appliedmultivariatestatistics/chapter/pca/) : PCA explained with R code examples
-   [Understanding UMAP](https://pair-code.github.io/understanding-umap/) : Short explanation with great visualizations, mainly useful for scRNA-seq analysis


